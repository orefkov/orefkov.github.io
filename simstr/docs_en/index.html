<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>simstr: Simstr lib.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">simstr<span id="projectnumber">&#160;1.3.1</span>
   </div>
   <div id="projectbrief">Yet another strings library</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Simstr lib. </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md34"></a>
simstr - String object and function library</h1>
<p><a href="https://github.com/orefkov/simstr/actions/workflows/cmake-multi-platform.yml"><img src="https://github.com/orefkov/simstr/actions/workflows/cmake-multi-platform.yml/badge.svg" alt="CMake on multiple platforms" style="pointer-events: none;" class="inline"/></a></p>
<p>Version 1.3.1.</p>
<p><span class="obfuscator"><a href="readme_ru.md">On Russian | По-русски</a></span></p>
<p>This library contains the modern implementation of several types of string objects and various algorithms for working with strings.</p>
<p>The goal of the library is to make working with strings in C++ as simple and easy as in many other languages, especially scripting languages, while maintaining optimality and performance at the level of C and C++, and even improving them.</p>
<p>It's no secret that working with strings in C++ often causes pain. The <code>std::string</code> class is often inconvenient or inefficient. Many functions that are usually necessary when working with strings are simply not there, and everyone has to write them themselves.</p>
<p>This library was not made as a universal combine that "can do everything", I implemented what I had to use at work, trying to do it in the most efficient way, and I modestly hope that I succeeded in something and will be useful to other people, either directly or as a source of ideas.</p>
<p>The library does not pretend to be a "change the header and everything works better" solution. I tried to make many methods compatible with <code>std::string</code> and <code>std::string_view</code>, but I didn't bother with it much. Rewriting old code to work with simstr will require some effort, but I assure you that it will pay off. And writing new code with its use is easy and enjoyable :)</p>
<p>The main difference between simstr and std::string is that instead of a single universal class, several types of objects are used to work with strings, each of which is good for its own purposes, and at the same time interacts well with each other. If you actively used std::string_view and understood its advantages and disadvantages compared to std::string, then the simstr approach will also be clear to you.</p>
<h2><a class="anchor" id="autotoc_md35"></a>
Main features of the library</h2>
<ul>
<li>Strings <code>char</code>, <code>char16_t</code>, <code>char32_t</code>, <code>wchar_t</code>.</li>
<li>Transparent conversion of strings from one character type to another, with automatic conversion between UTF-8, UTF-16, UTF-32, using <a href="https://github.com/simdutf/simdutf">simdutf</a>.</li>
<li>Extensible "String Expression" system. Allows you to efficiently implement the conversion and addition (concatenation) of strings, literals, numbers and possibly other objects.</li>
<li>String functions:<ul>
<li>Getting substrings.</li>
<li>Searching for substrings and characters - from the beginning or from the end of the string.</li>
<li>Various string trimming - right, left, everywhere, by whitespace characters, by specified characters.</li>
<li>Replacing substrings.</li>
<li>Replacing a set of characters with a set of corresponding substrings.</li>
<li>Merging (join) containers of strings into a single string, with specifying separators and options - "skip empty", "separator after last".</li>
<li>Splitting strings into parts by a specified separator. Splitting is possible directly into a container with strings, or by calling a functor for each substring, or by iterating using the <code>Splitter</code> iterator.</li>
</ul>
</li>
<li>Integration with <code>format</code> and <code>sprintf</code> formatting functions (with automatic buffer increase). Formatting is possible for <code>char</code>, <code>wchar_t</code> strings and strings compatible with <code>wchar_t</code> in size. That is, under Windows it is <code>char16_t</code>, under Linux - <code>char32_t</code>. Writing my own formatting library was not part of my plans.</li>
<li>Parsing integers with the possibility of "fine" tuning during compilation - you can set options for checking overflow, skipping whitespace characters, a specific radix or auto-selection by prefixes <code>0x</code>, <code>0</code>, <code>0b</code>, <code>0o</code>, admissibility of the <code>+</code> sign. Parsing is implemented for all types of strings and characters.</li>
<li>Parsing doubles for all types of characters.</li>
<li>Minimal Unicode support is included when converting <code>upper</code>, <code>lower</code> and case-insensitive string comparison. It only works for characters in the first plane of Unicode (up to 0xFFFF), and when changing case, it does not take into account cases where one code point can be converted into several, that is, the case conversion of characters corresponds to <code>std::towupper</code>, <code>std::towlower</code> for the unicode locale, only faster and can work with any type of characters.</li>
<li>Implemented <code>hash map</code> for string type keys, based on <code>std::unordered_map</code>, with the possibility of more efficient storage and comparison of keys compared to <code>std::string</code> keys. Case-insensitive key comparison is supported (Ascii or minimal Unicode (see previous paragraph)).</li>
</ul>
<h2><a class="anchor" id="autotoc_md36"></a>
Main objects of the library</h2>
<ul>
<li>simple_str&lt;K&gt; - the simplest string (or piece of string), immutable, not owning, analogue of <code>std::string_view</code>.</li>
<li>simple_str_nt&lt;K&gt; - the same, only declares that it ends with 0. For working with third-party C-API.</li>
<li>sstring&lt;K&gt; - shared string, immutable, owning, with shared character buffer, SSO support.</li>
<li>lstring&lt;K, N&gt; - local string, mutable, owning, with a specified size of the SSO buffer.</li>
</ul>
<h2><a class="anchor" id="autotoc_md37"></a>
Articles</h2>
<ul>
<li>Overview and introduction</li>
<li><a href="https://habr.com/ru/articles/935590">Overview article on Habr</a></li>
<li><a href="https://habr.com/ru/articles/936468/">Description of the "Expression Templates" technique used</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md38"></a>
Usage</h2>
<p><code>simstr</code> consists of three header files and two source files. You can connect as a CMake project via <code>add_subdirectory</code> (the <code>simstr</code> library), you can simply include the files in your project. Building also requires <a href="https://github.com/simdutf/simdutf">simdutf</a> (when using CMake it is downloaded automatically).</p>
<p>The library is included in <a href="https://vcpkg.io">vcpkg</a>, use as <code>orefkov-simstr</code>.</p>
<p><code>simstr</code> requires a compiler of standard no lower than C++20 to work - concepts and std::format are used. The work was tested under Windows on MSVC-19 and Clang-19, under Linux - on GCC-13 and Clang-21. The work in WASM was also tested, built in Emscripten 4.0.6, Clang-21.</p>
<h2><a class="anchor" id="autotoc_md39"></a>
Convenient debugging</h2>
<p>Along with the library, two files are supplied that allow viewing simstr string objects in debuggers more convenient.\ It is described in more detail in here.</p>
<h2><a class="anchor" id="autotoc_md40"></a>
Benchmarks</h2>
<p>Benchmarks are performed using the <a href="https://github.com/google/benchmark">Google benchmark</a> framework. I tried to make measurements for the most typical operations that occur in normal work. I took measurements on my equipment, under Windows and Linux (in WSL), using MSVC, Clang, GCC compilers. Third-party results are welcome. I also took measurements in WASM, built in Emscripten. I draw your attention to the fact that a 32-bit build is assembled under WASM in Emscripten, which means that the sizes of SSO buffers in objects are smaller.</p>
<ul>
<li><a href="bench/bench_str.cpp">Benchmark source code</a></li>
<li><a href="https://snegopat.ru/simstr/results.html">Benchmark results</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md41"></a>
Usage examples</h2>
<p>While no separate usage examples have been prepared, you can look at the texts of <a href="https://github.com/orefkov/simstr/blob/main/tests/test_str.cpp">tests</a>, <a href="https://github.com/orefkov/simstr/blob/main/bench/bench_str.cpp">benchmarks</a>, and <a href="https://github.com/orefkov/simstr/blob/main/bench/process_result.cpp">html preparation utilities</a> from the benchmark results.</p>
<p>Also simstr is used in my projects:</p><ul>
<li><a href="https://github.com/orefkov/simjson">simjson</a> - a library for simple work with JSON using simstr strings.</li>
<li><a href="https://github.com/orefkov/simrex">simrex</a> - a wrapper for working with <a href="https://github.com/kkos/oniguruma">Oniguruma</a> regular expressions using simstr strings.</li>
<li><a href="https://github.com/orefkov/v8sqlite">v8sqlite</a> - external component for 1C-Enterprise V8 for working with sqlite.</li>
</ul>
<h2><a class="anchor" id="autotoc_md42"></a>
Generated documentation</h2>
<p><a href="https://snegopat.ru/simstr/docs/">Located here</a>   </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
